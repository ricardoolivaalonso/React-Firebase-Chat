(this["webpackJsonpfirebase-01"]=this["webpackJsonpfirebase-01"]||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var c=a(11),n=a.n(c),s=a(31),r=a.n(s),i=a(19),u=a(0),o=a.n(u),l=a(1),j=a(10),b=a(6),d=Object(c.createContext)(),h=function(e){var t=e.children,a=Object(c.useState)(!1),n=Object(j.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(!1),u=Object(j.a)(i,2),o=u[0],l=u[1],h=Object(c.useState)(!0),m=Object(j.a)(h,2),O=m[0],f=m[1],p=Object(c.useState)(!0),x=Object(j.a)(p,2),v=x[0],_=x[1],N=Object(c.useState)(null),g=Object(j.a)(N,2),w={uid:s,setUid:r,displayName:o,setDisplayName:l,loggedout:O,setLoggedout:f,isVisible:v,setIsVisible:_,notification:g[0],setNotification:g[1]};return Object(b.jsx)(d.Provider,{value:w,children:t})},m=function(){var e=Object(c.useContext)(d),t=e.displayName,a=e.setLoggedout,n=e.setUid,s=e.setDisplayName,r=function(){var e=Object(l.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c=Object(i.b)();try{Object(i.e)(c),a(!0),n(!1),s(!1)}catch(r){}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("header",{className:"header",children:Object(b.jsxs)("div",{className:"header__row",children:[Object(b.jsxs)("span",{className:"header__title",children:["Welcome ",t]}),Object(b.jsx)("form",{className:"header__form",children:Object(b.jsx)("button",{className:"header__button",type:"submit",onClick:function(e){return r(e)},title:"Log out",children:Object(b.jsxs)("svg",{className:"header__icon svg-icon ",viewBox:"0 0 20 20",children:[Object(b.jsx)("path",{fill:"none",d:"M13.53,2.238c-0.389-0.164-0.844,0.017-1.01,0.41c-0.166,0.391,0.018,0.845,0.411,1.01\r c2.792,1.181,4.598,3.904,4.6,6.937c0,4.152-3.378,7.529-7.53,7.529c-4.151,0-7.529-3.377-7.529-7.529\r C2.469,7.591,4.251,4.878,7.01,3.683C7.401,3.515,7.58,3.06,7.412,2.67c-0.17-0.392-0.624-0.571-1.014-0.402\r c-3.325,1.44-5.472,4.708-5.47,8.327c0,5.002,4.069,9.071,9.071,9.071c5.003,0,9.073-4.07,9.073-9.071\r C19.07,6.939,16.895,3.659,13.53,2.238z"}),Object(b.jsx)("path",{fill:"none",d:"M9.999,7.616c0.426,0,0.771-0.345,0.771-0.771v-5.74c0-0.426-0.345-0.771-0.771-0.771\r c-0.427,0-0.771,0.345-0.771,0.771v5.74C9.228,7.271,9.573,7.616,9.999,7.616z"})]})})})]})})},O=a(14),f=a(32),p=a(18),x=Object(f.a)({apiKey:"AIzaSyARQsBDn3WWpObcXbX6ZlPD3mF4bVVINlk",authDomain:"roa-01-f4ba9.firebaseapp.com",projectId:"roa-01-f4ba9",storageBucket:"roa-01-f4ba9.appspot.com",messagingSenderId:"768145900737",appId:"1:768145900737:web:7dbc60ceb5a49512908040"}),v=Object(p.e)(x),_=function(e){var t=e.uid,a=e.dname,n=e.messageID,s=e.usernameID,r=e.content,i=Object(c.useState)(!1),u=Object(j.a)(i,2),d=u[0],h=u[1],m=function(){var e=Object(l.a)(o.a.mark((function e(a,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==s){e.next=4;break}return e.next=4,Object(p.c)(Object(p.d)(v,"chat",c));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"chat__content",id:n,onDoubleClick:function(e){return h(!0)},onMouseLeave:function(e){return h(!1)},children:[Object(b.jsx)("p",{className:"chat__description",children:r}),Object(b.jsxs)("span",{className:"chat__username",children:[" ",a]}),d&&(t===s?Object(b.jsx)("div",{className:"chat__bg",children:Object(b.jsxs)("svg",{className:"svg-icon chat__delete",viewBox:"0 0 20 20",onClick:function(e){return m(e,n)},children:[Object(b.jsx)("path",{fill:"#f9f9f9",d:"M16.471,5.962c-0.365-0.066-0.709,0.176-0.774,0.538l-1.843,10.217H6.096L4.255,6.5c-0.066-0.362-0.42-0.603-0.775-0.538C3.117,6.027,2.876,6.375,2.942,6.737l1.94,10.765c0.058,0.318,0.334,0.549,0.657,0.549h8.872c0.323,0,0.6-0.23,0.656-0.549l1.941-10.765C17.074,6.375,16.833,6.027,16.471,5.962z"}),Object(b.jsx)("path",{fill:"#f9f9f9",d:"M16.594,3.804H3.406c-0.369,0-0.667,0.298-0.667,0.667s0.299,0.667,0.667,0.667h13.188c0.369,0,0.667-0.298,0.667-0.667S16.963,3.804,16.594,3.804z"}),Object(b.jsx)("path",{fill:"#f9f9f9",d:"M9.25,3.284h1.501c0.368,0,0.667-0.298,0.667-0.667c0-0.369-0.299-0.667-0.667-0.667H9.25c-0.369,0-0.667,0.298-0.667,0.667C8.583,2.985,8.882,3.284,9.25,3.284z"})]})}):null)]})},N=function(e){var t=e.uid,a=e.messageID,c=e.reactions,n=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},s=c.includes(t)?{reactions:c.filter((function(e){return e!==t}))}:{reactions:[].concat(Object(O.a)(c),[t])},e.next=4,Object(p.h)(Object(p.d)(v,"chat",n),s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"chat__like-c",children:[c.includes(t)?Object(b.jsx)("svg",{className:"svg-icon chat__like",viewBox:"0 0 24 24",onClick:function(e){return n(e,a)},children:Object(b.jsx)("path",{fill:"#e0245e",d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"})}):Object(b.jsx)("svg",{className:"svg-icon chat__like",viewBox:"0 0 24 24",onClick:function(e){return n(e,a)},children:Object(b.jsx)("path",{stroke:"#797f8f",d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"})}),Object(b.jsx)("small",{className:"chat__counter",children:c.length})]})},g=function(){var e=Object(c.useContext)(d).uid,t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useRef)(null),i=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!1===e){t.next=8;break}return t.next=4,Object(p.g)(Object(p.b)(v,"chat"));case 4:a=t.sent,Object(p.f)(a,(function(e){var t=[];e.forEach((function(e){return(t=[].concat(Object(O.a)(t),[{messageID:e.id,usernameID:e.data().username,dname:e.data().dname,content:e.data().content,reactions:e.data().reactions,timestamp:e.data().timestamp}])).sort((function(e,t){return e.timestamp-t.timestamp}))})),s(t)})),t.next=10;break;case 8:console.log("Debes estar logueado para ver los mensajes"),s([]);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r.current.scrollIntoView({behavior:"smooth"})}),[n]),Object(c.useEffect)((function(){i()}),[e]),Object(b.jsx)("div",{className:"chat",children:Object(b.jsxs)("div",{className:"chat__list",children:[n.map((function(t){return Object(b.jsxs)("article",{className:"chat__item ".concat(e!==t.usernameID?"chat__item--current":null),children:[Object(b.jsx)(_,{messageID:t.messageID,usernameID:t.usernameID,content:t.content,dname:t.dname,uid:e}),Object(b.jsx)(N,{messageID:t.messageID,reactions:t.reactions,dname:t.dname,uid:e})]},t.messageID)})),Object(b.jsx)("div",{ref:r})]})})},w=a(43),y=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useContext)(d),r=s.uid,i=s.displayName,u=function(){var e=Object(l.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!r){e.next=9;break}return c={id:Object(w.a)(),username:r,dname:i,content:a,reactions:[],timestamp:Date.now()},e.next=6,Object(p.a)(Object(p.b)(v,"chat"),c);case 6:n(""),e.next=10;break;case 9:console.log("Debes estar logueado para enviar un mensaje");case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{className:"form",onSubmit:function(e){return u(e)},children:[Object(b.jsx)("input",{className:"form__input",type:"text",placeholder:"Send a message",value:a,onChange:function(e){return n(e.target.value)}}),Object(b.jsx)("button",{className:"form__submit",type:"submit",children:"Send"})]})},k=function(){var e=Object(c.useContext)(d),t=e.notification,a=e.setNotification;return setTimeout((function(){a(null)}),4e3),Object(b.jsx)("span",{className:"notification",children:t})},C=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(j.a)(s,2),u=r[0],h=r[1],m=Object(c.useContext)(d),O=m.notification,f=m.setLoggedout,p=m.setUid,x=m.setDisplayName,v=m.setIsVisible,_=m.setNotification,N=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=Object(i.b)(),e.prev=2,e.next=5,Object(i.d)(c,a,u);case 5:return n=e.sent,e.next=8,n.user;case 8:if(!(s=e.sent).error){e.next=11;break}throw new Error({myStatus:s.error});case 11:f(!1),p(s.uid),x(s.displayName),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),_(e.t0.code),console.log("--",e.t0.code);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{className:"auth__form",onSubmit:function(e){return N(e)},children:[Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("h2",{className:"auth__title",children:"Log in"})}),Object(b.jsxs)("div",{className:"auth__row",children:[Object(b.jsx)("input",{className:"auth__input",type:"email",id:"email",required:!0,value:a,onChange:function(e){return n(e.target.value)}}),!a&&Object(b.jsx)("label",{className:"auth__label",htmlFor:"email",children:"Email"})]}),Object(b.jsxs)("div",{className:"auth__row",children:[Object(b.jsx)("input",{className:"auth__input",type:"password",id:"pass",minLength:"6",required:!0,value:u,onChange:function(e){return h(e.target.value)}}),!u&&Object(b.jsx)("label",{className:"auth__label",htmlFor:"pass",children:"Password"})]}),Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("button",{className:"auth__submit",type:"submit",children:"Log in"})}),O&&Object(b.jsx)(k,{}),Object(b.jsx)("hr",{className:"auth__hr"}),Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("button",{className:"auth__create",type:"button",onClick:function(){return v(!1)},children:"Create account"})})]})},D=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(j.a)(s,2),u=r[0],h=r[1],m=Object(c.useState)(""),O=Object(j.a)(m,2),f=O[0],p=O[1],x=Object(c.useContext)(d),v=x.notification,_=x.setLoggedout,N=x.setUid,g=x.setDisplayName,w=x.setIsVisible,y=x.setNotification,C=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=Object(i.b)(),e.prev=2,e.next=5,Object(i.a)(c,a,u);case 5:return n=e.sent,e.next=8,n.user;case 8:return s=e.sent,e.next=11,Object(i.f)(c.currentUser,{displayName:f});case 11:if(!s.error){e.next=13;break}throw new Error({myStatus:s.error});case 13:_(!1),N(s.uid),g(s.displayName),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),y(e.t0.code);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{className:"auth__form",onSubmit:function(e){return C(e)},children:[Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("h2",{className:"auth__title",children:"Sign Up"})}),Object(b.jsxs)("div",{className:"auth__row",children:[Object(b.jsx)("input",{className:"auth__input",type:"input",id:"username",required:!0,value:f,onChange:function(e){return p(e.target.value)}}),!f&&Object(b.jsx)("label",{className:"auth__label",htmlFor:"username",children:"Name"})]}),Object(b.jsxs)("div",{className:"auth__row",children:[Object(b.jsx)("input",{className:"auth__input",type:"email",id:"email",value:a,onChange:function(e){return n(e.target.value)}}),!a&&Object(b.jsx)("label",{className:"auth__label",htmlFor:"email",children:"Email"})]}),Object(b.jsxs)("div",{className:"auth__row",children:[Object(b.jsx)("input",{className:"auth__input",type:"password",id:"pass",minLength:"6",required:!0,value:u,onChange:function(e){return h(e.target.value)}}),!u&&Object(b.jsx)("label",{className:"auth__label",htmlFor:"pass",children:"Password"})]}),Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("button",{className:"auth__submit",type:"submit",children:"Create account"})}),v&&Object(b.jsx)(k,{}),Object(b.jsx)("hr",{className:"auth__hr"}),Object(b.jsx)("div",{className:"auth__row",children:Object(b.jsx)("button",{className:"auth__create",type:"button",onClick:function(){return w(!0)},children:"Login"})})]})},S=function(){var e=Object(c.useContext)(d).isVisible;return Object(b.jsx)("div",{className:"auth",children:e?Object(b.jsx)(C,{}):Object(b.jsx)(D,{})})},I=(a(40),function(){var e=Object(c.useContext)(d),t=e.loggedout,a=e.setLoggedout,n=e.setUid,s=e.setDisplayName;return Object(c.useEffect)((function(){var e=Object(i.b)();Object(i.c)(e,(function(e){e&&(a(!1),n(e.uid),s(e.displayName))}))}),[]),Object(b.jsxs)("div",{className:"main",children:[t&&Object(b.jsx)(S,{}),Object(b.jsx)(m,{}),Object(b.jsxs)("main",{className:"container",children:[Object(b.jsx)(g,{}),Object(b.jsx)(y,{})]})]})});r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(h,{children:Object(b.jsx)(I,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.069ce4c6.chunk.js.map